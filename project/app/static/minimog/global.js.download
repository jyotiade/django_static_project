if(!customElements.get("foxkit-quantity-selector")){class t extends HTMLElement{constructor(){super()}connectedCallback(){this.input=this.querySelector("input"),this.changeEvent=new Event("change",{bubbles:!0}),this.productId=this.dataset.productId,this.querySelectorAll("button").forEach((t=>{t.onclick=null,t.onclick=t=>{this.onButtonClick(t)}})),this.input.addEventListener("change",(()=>{this.input.value<=1&&(this.input.value=1)}))}onButtonClick(t){t.preventDefault();const e=this.input.value;"plus"===t.target.name?this.input.stepUp():this.input.stepDown(),e!==this.input.value&&this.input.dispatchEvent(this.changeEvent)}}customElements.define("foxkit-quantity-selector",t)}class FoxKitProductCard extends HTMLElement{constructor(){super(),this.selectors={price:".foxkit-product-card__price, [foxkit-card-price]",compareAtPrice:".foxkit-product-card__compare-price, [foxkit-card-compare-price]",image:".foxkit-product-card__img",form:"form",submitBtn:'button[name="foxkit-add"]'}}connectedCallback(){this.mCartDrawer=document.querySelector("m-cart-drawer"),this.zCartDrawer=document.querySelector("drawer-component#Drawer-Cart cart-drawer"),this.sCartDrawer=document.querySelector("cart-drawer"),this.mCartMain=document.querySelector("m-cart-template, m-cart"),this.zCartMain=document.querySelector("cart-items.f-cart"),this.isInCart=!!this.closest('form[action*="/cart"]'),this.domNodes=FoxKitV2.Utils.queryDomNodes(this.selectors,this),this.errorWrapper=this.dataset.errorWrapper?document.querySelector(this.dataset.errorWrapper):this,this.addEventListener("change",this.onVariantChange.bind(this)),this.domNodes.submitBtn&&this.domNodes.submitBtn.addEventListener("click",this.onSubmitHandler.bind(this))}disConnectedCallback(){this.removeEventListener("change",this.onVariantChange.bind(this)),this.domNodes.submitBtn&&this.domNodes.submitBtn.removeEventListener("click",this.onSubmitHandler.bind(this))}setupData(t){this.productData=t}onVariantChange(t){const{target:e}=t;if(!("variant-id"===e.getAttribute("name")||"id"===e.getAttribute("name"))||!this.productData)return;const i=Number(e.value);this.selectedVariant=this.productData.variants.find((t=>t.id===i));const{price:s,compare_at_price:n,featured_image:o}=this.selectedVariant;this.domNodes.price&&(this.domNodes.price.innerHTML=FoxKitV2.Utils.formatMoney(s,FoxKitSettings.moneyFormat)),this.handleChangeImage(o),n&&n>s?(this.domNodes.compareAtPrice.innerHTML=FoxKitV2.Utils.formatMoney(n,FoxKitSettings.moneyFormat),this.domNodes.compareAtPrice.classList.remove("foxkit-hidden")):this.domNodes.compareAtPrice.classList.add("foxkit-hidden")}handleChangeImage(t){t&&this.domNodes.image&&(this.domNodes.image.src=`${t.src}&width=500`)}onSubmitHandler(t){if(t.preventDefault(),this.domNodes.submitBtn.classList.contains("foxkit-spinner--loading"))return;this.domNodes.submitBtn.classList.add("foxkit-spinner--loading");const e={method:"POST",headers:{Accept:"application/javascript","X-Requested-With":"XMLHttpRequest"}},i=new FormData(this.domNodes.form);this.zCartDrawer&&(i.append("sections",this.zCartDrawer.getSectionsToRender().map((t=>t.id))),i.append("sections_url",window.location.pathname)),this.zCartMain&&(i.append("sections",this.zCartMain.getSectionsToRender().map((t=>t.section))),i.append("sections_url",window.location.pathname)),this.sCartDrawer&&!window.FoxKitSections&&(i.append("sections",this.sCartDrawer.getSectionsToRender()?.map((t=>t.id))),i.append("sections_url",window.location.pathname)),window.FoxKitSections&&(i.append("sections",window.FoxKitSections),i.append("sections_url",window.location.pathname)),e.body=i;const{FoxKitSettings:s}=window;fetch(`${s.routes.cart_add_url}`,e).then((t=>t.json())).then((async t=>{if(t&&t.id){if(!s.enableAjaxAtc&&"PrePurchase"===this.dataset.plugin)return window.FoxKitV2.goToCart();window.MinimogTheme?(this.mCartDrawer&&await this.mCartDrawer.onCartDrawerUpdate(!window.FoxKitV2.hasDiscount),this.mCartMain&&await this.mCartMain.onCartUpdate(!window.FoxKitV2.hasDiscount),window.FoxKitV2.initCart(),this.isInCart||this.showNotification(t)):window.FoxTheme?(this.zCartDrawer&&await this.zCartDrawer.renderContents(t),this.zCartMain&&await this.zCartMain.renderContents(t),window.FoxKitModules.InCart&&FoxKitPlugins.InCart.length>0&&window.FoxKitModules.InCart.getCart(),window.FoxKitV2.initCart(),this.isInCart||this.showNotification(t)):this.sCartDrawer&&!window.FoxKitSections?(this.sCartDrawer.renderContents&&this.sCartDrawer.renderContents(t),this.sCartDrawer.classList.remove("is-empty")):("cart"===window.FoxKitSettings.template&&setTimeout((()=>{window.location.reload()}),500),this.showNotification(t)),window.Shopify&&"function"==typeof window.Shopify.onItemAdded&&window.Shopify.onItemAdded(t),window.FoxkitEvents&&window.FoxkitEvents.emit("ON_ITEM_ADDED_FROM_CARD",t)}else t&&422===t.status&&FoxKitModules.Notification.show({target:this,method:"appendChild",type:"warning",message:t.description||"Cannot add this item to cart"})})).catch((t=>{})).finally((()=>{this.domNodes.submitBtn.classList.remove("foxkit-spinner--loading")}))}showNotification(t){FoxKitModules.Notification.show({target:this.errorWrapper?this.errorWrapper:document.body,method:"appendChild",type:"success",message:window.__i18n.tr("item_added_to_cart",{product_title:t.product_title}),last:3e3,sticky:!this.errorWrapper})}}customElements.define("foxkit-product-card",FoxKitProductCard);class FoxKitElements extends HTMLElement{constructor(){super()}connectedCallback(){this.plugin=this.dataset.plugin}setConfig(t){this.config=t}}customElements.define("foxkit-component",FoxKitElements),customElements.get("foxkit-visible-check")||customElements.define("foxkit-visible-check",class extends HTMLElement{constructor(){super(),this.isShow=!1,this.rectY=null}connectedCallback(){this.plugin=this.firstElementChild,"IntersectionObserver"in window&&this.initIntersectionObserver()}disconnectedCallback(){this.disconnectObserver()}observerCallback(t,e,i){if(!t[0].isIntersecting)return;const s=t[0].intersectionRect.y;s!==this.rectY&&this.isShow||(this.rectY=s,i.initMutationObserver(t[0].target),["Bundle","QuantityDiscount","ProductRecommendation","Countdown"].includes(this.plugin.dataset.plugin)||(window.Shopify.analytics?.publish("foxkit_plugin_viewed",{shop:window.FoxKitV2.shop,plugin:this.plugin.dataset.plugin,pluginId:this.plugin?.config?._id,productId:this.plugin?.dataset?.productId||this.plugin?.config?.product_id,variantId:this.plugin?.dataset?.selectedVariantId}),i.isShow=!0),e.unobserve(this))}mutationObserverCallback(t,e,i){const s=t[0].target.closest(i).getBoundingClientRect();0===s.height||0===s.width||this.isShow||(this.isShow=!0,window.Shopify.analytics?.publish("foxkit_plugin_viewed",{shop:window.FoxKitV2.shop,plugin:this.plugin.dataset.plugin,pluginId:this.plugin?.config?._id,productId:this.plugin?.dataset?.productId||this.plugin?.config?.product_id,variantId:this.plugin?.dataset?.selectedVariantId}))}initIntersectionObserver(){if(this.observer)return;this.observer=new IntersectionObserver(((t,e)=>this.observerCallback(t,e,this)),{rootMargin:"10px"}),this.observer.observe(this.plugin)}initMutationObserver(t){if(this.mutationObserver)return;this.mutationObserver=new MutationObserver(((e,i)=>this.mutationObserverCallback(e,i,t.tagName)));this.mutationObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}disconnectMutationObserver(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null,delete this.mutationObserver)}disconnectObserver(){this.observer&&(this.observer.disconnect(),this.observer=null,delete this.observer)}});const WEB_PIXELS_EVENT={ADD_TO_CART:"foxkit_add_to_cart",VIEW_PLUGIN:"foxkit_plugin_viewed",REACHED_GOAL:"foxkit_reached_goal",COMPLETE_ORDER:"foxkit_complete_order",CLICKS:"foxkit_clicks",TEASER_CLICKS:"foxkit_teaser_clicks"};function publishWebPixelsEvent({plugin:t,pluginId:e,productId:i,variantId:s,selectedItems:n,foxKitEventId:o,...r},a){window.Shopify.analytics?.publish(a,{shop:window.FoxKitV2.shop,plugin:t,pluginId:e,productId:i,variantId:s,selectedItems:n,foxKitEventId:o,...r}),a===WEB_PIXELS_EVENT.VIEW_PLUGIN&&["LuckyWheel","PopUp"].includes(t)&&navigator.sendBeacon("https://foxkit.app/track/batch",JSON.stringify({events:[{shop:window.Shopify.shop,plugin:t}],metadata:{eventId:generateId(),appType:"foxkit",appId:"d4b61aaa-4d7c-11ee-be56-0242ac120002"}}))}const generateId=t=>{for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;s<t;s++)e+=i.charAt(Math.floor(62*Math.random()));return e};