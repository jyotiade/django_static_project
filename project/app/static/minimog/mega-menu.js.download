customElements.get("foxkit-menu")||customElements.define("foxkit-menu",class extends HTMLElement{constructor(){super(),this.config=null,this.menuData=null,this.menuDir=null,this.menuLayout=null,this.arrowIcon='<svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5 2.25 8.25 6 4.5 9.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>'}connectedCallback(){this.menuId=this.dataset.id,this.menuLayout=this.dataset.layout,this.menuId&&(this.config=window.FoxKitPlugins.Menus.find((e=>e.id===this.menuId))&&window.FoxKitPlugins.Menus.find((e=>e.id===this.menuId)).data,this.menuData=window.FoxKitPlugins.MenuData.find((e=>e.id===this.menuId))&&window.FoxKitPlugins.MenuData.find((e=>e.id===this.menuId)).data),this.config&&(this.itemLevels=this.getAllLevels(),this.classList.add("f-menu"),this.renderStyleVariables(),this.renderLayout())}renderStyleVariables(){const e=this.config.design;this.menuDir=e.layout,this.classList.add(`f-menu--${e.layout}`),this.style.setProperty("--f-item-space",e.item_space||30),this.style.setProperty("--f-menu-bg",e.menu_bg),this.style.setProperty("--f-menu-text",e.menu_text),this.style.setProperty("--f-menu-text-hover",e.menu_text_hover),this.style.setProperty("--f-submenu-bg",e.submenu_bg),this.style.setProperty("--f-submenu-text",e.submenu_text),this.style.setProperty("--f-submenu-text-hover",e.submenu_text_hover),this.style.setProperty("--f-menu-container-width",e.vertical_menu_width||300)}renderLayout(){this.setAttribute("role","menu"),"vertical"===this.menuDir&&"fill"===this.config.design.container_width&&this.classList.add("f-menu--container-fill"),this.config.orders.layout.forEach((e=>this.renderItem(e,this)))}renderItem(e,t){const s=this.itemLevels[e],i=this.getItemData(e),n=i.submenu&&i.submenu.layout?i.submenu.layout:"dropdown",l=this.config.orders[e]&&this.config.orders[e].length>0,o=document.createElement("foxkit-menu-dropdown");o.setAttribute("id",e),o.classList.add("f-menu__item",`f-menu__item--${n}`),1===s&&o.classList.add("f-menu__item-parent"),s>1&&o.classList.add("f-menu__subitem"),l&&o.classList.add("f-menu__item--has-child"),i.show_on_desktop||o.classList.add("f-menu__item--hide-desk"),i.show_on_mobile||o.classList.add("f-menu__item--hide-mb"),i.submenu&&"full-width"===i.submenu.container&&"dropdown"!==n&&o.classList.add("f-menu__item--container-full"),o.dataset.trigger=i.submenu&&i.submenu.trigger?i.submenu.trigger:"hover",o.dataset.level=s,o.dataset.layout=n,1===s&&o.setAttribute("role","menuitem");let a=`title="${i.title}"`;i.link&&i.link.external&&(a+=' target="_blank"'),i.title&&(o.innerHTML=`<a class="f-menu__link f-menu__link--level-${s}${s>1?" f-menu__sublink":""}" href="${i.link.value}"${a}>\n         <span class="f-menu__label">${i.title}</span>\n      </a>`),this.renderAddons({itemData:i,hasChild:l,node:o}),t.appendChild(o),l&&this.renderSubmenu({items:this.config.orders[e],parent:o,level:s,settings:i.submenu})}renderAddons({itemData:e,hasChild:t,node:s}){const i=e.link&&e.link.value;if(e.icon&&e.icon.html){const t=document.createElement("span");t.classList.add("f-menu__icon"),t.style.setProperty("--f-menu-icon-size",`${e.icon.size}px`),t.style.setProperty("--f-menu-icon-color",e.icon.color),t.innerHTML=e.icon.html,s.firstElementChild&&s.firstElementChild.prepend(t)}if(e.badge&&e.badge.label&&e.badge.enable){const t=document.createElement("span");t.classList.add("f-menu__badge"),t.style.setProperty("--f-badge-color-bg",e.badge.color||"#000"),t.style.setProperty("--f-badge-color-text",e.badge.colorText||"#fff"),t.innerText=e.badge.label,s.firstElementChild&&s.firstElementChild.appendChild(t)}if(e.image&&e.image.url){const t=document.createElement("div");if(t.classList.add("f-menu__banner"),e.banner_class&&e.banner_class.split(" ").forEach((e=>t.classList.add(e))),t.style.setProperty("--f-banner-width",e.image.width),t.style.setProperty("--f-banner-text-color",e.banner_text_color||"#000"),t.style.setProperty("--f-banner-ratio",e.image.aspectRatio||"16/9"),t.innerHTML=`<img alt="${e.title}" width="${e.image.width}" src="${e.image.url}&width=${2*e.image.width}" />`,i){const s=document.createElement("a");s.classList.add("f-full-width-link"),s.href=e.link.value,e.link.external&&(s.target="_blank"),s.innerHTML=`<span class="f-visually-hidden">${e.title}</span>`,t.prepend(s)}if(e.banner_heading||e.banner_button_label){const s=document.createElement("div");if(e.banner_heading){const t=document.createElement("h3");t.textContent=e.banner_heading,t.classList.add("f-menu__banner-heading"),s.appendChild(t)}if(e.banner_button_label){const t=document.createElement("a");t.textContent=e.banner_button_label,t.classList.add("f-menu__banner-button"),s.appendChild(t)}s.classList.add("f-menu__banner-content"),t.appendChild(s)}s.appendChild(t)}if(t){const e=document.createElement("span");e.classList.add("f-menu__arrow"),e.innerHTML=this.arrowIcon,s.firstElementChild.appendChild(e)}}renderSubmenu({items:e,parent:t,level:s,settings:i}){const n=document.createElement("div");n.classList.add("f-menu__submenu",`f-menu__submenu--level-${s}`),n.setAttribute("tabindex","-1");let l=n;if(i&&"mobile"!==this.menuLayout){const t="auto"===i.columns?e.length:i.columns;if(n.style.setProperty("--f-submenu-cols",t),"mega"===i.layout&&n.classList.add(`f-menu__submenu--${i.container}`),i.contentContainer&&"horizontal"===this.menuDir){n.style.setProperty("--f-menu-container-width",i.contentWidth||1200),n.classList.add("f-menu__submenu--show-container");const e=document.createElement("div");e.classList.add("f-menu__container"),n.appendChild(e),l=e}}e.forEach((e=>this.renderItem(e,l))),t.appendChild(n)}getItemData(e){const t=this.menuData[e];return window.FoxKitSettings?.primaryLocale||(t.title=t?.locales?.[window.Shopify?.locale]?.title||t?.title),t}getLevel(e,t){if(t.layout&&t.layout.includes(e))return 1;for(const s in t)if("layout"!==s&&t[s].includes(e)){const e=s;return t.layout&&t.layout.includes(e)?2:1+this.getLevel(e,t)}return 1}getAllLevels(){return Object.keys(this.menuData).reduce(((e,t)=>(e[t]=this.getLevel(t,this.config.orders),e)),{})}});class FoxKitMenuItem extends HTMLElement{constructor(){super(),this.classes={active:"is-active"},this.selectors={menuItem:".f-menu__item",subMenu:".f-menu__submenu",menuLink:".f-menu__link",mobileToggle:".f-menu__arrow"},this.isActive=!1,this.transitionDuration=200}connectedCallback(){this.setup(),this.bindEvents()}disconnectedCallback(){this.menuLink.removeEventListener("click",this.onItemClick.bind(this)),this.removeEventListener("focusout",this.onFocusOut.bind(this)),this.removeEventListener("mouseenter",this.onMouseEnter.bind(this)),this.removeEventListener("mouseleave",this.handleMouseLeave),this.mobileToggle&&this.mobileToggle.removeEventListener("click",this.onMobileToggle.bind(this))}setup(){this.menuWrapper=this.closest("foxkit-menu"),this.menuLayout=this.menuWrapper&&this.menuWrapper.dataset.layout,this.parent=this.parentElement&&this.parentElement.closest("foxkit-menu-dropdown"),this.menuLink=this.querySelector(this.selectors.menuLink),this.mobileToggle=this.querySelector(this.selectors.mobileToggle),this.subMenu=this.querySelector(this.selectors.subMenu),this.trigger=this.dataset.trigger,this.level=Number(this.dataset.level)}bindEvents(){"mobile"===this.menuLayout?this.mobileToggle&&this.mobileToggle.addEventListener("click",this.onMobileToggle.bind(this)):"click"===this.trigger?(this.menuLink&&this.menuLink.addEventListener("click",this.onItemClick.bind(this)),this.addEventListener("focusout",this.onFocusOut.bind(this))):(1===this.level||2===this.level&&this.parent&&"mega"!==this.parent.dataset.layout)&&this.addEventListener("mouseenter",this.onMouseEnter.bind(this))}onMouseEnter(){this.classList.contains(this.classes.active)||(this.reset(),this.classList.add(this.classes.active),this.isActive=!1,this.handleMouseLeave=this.handleMouseLeave||this.onMouseLeave.bind(this),this.addEventListener("mouseleave",this.handleMouseLeave))}onMouseLeave(){this.classList.remove(this.classes.active),this.reset(),this.isActive=!1,this.removeEventListener("mouseleave",this.handleMouseLeave)}onItemClick(e){this.subMenu=this.subMenu||this.querySelector(this.selectors.subMenu),this.subMenu&&(e.preventDefault(),this.reset(),this.classList.toggle(this.classes.active),this.isActive=!this.isActive)}onFocusOut(){setTimeout((()=>{this.isActive&&!this.contains(document.activeElement)&&(this.classList.remove(this.classes.active),this.isActive=!1)}))}onMobileToggle(e){e.preventDefault(),this.reset(),this.classList.toggle(this.classes.active),this.subMenu=this.subMenu||this.querySelector(this.selectors.subMenu),this.subMenu&&(this.isActive?this.closeSubmenu():this.openSubmenu(),this.isActive=!this.isActive)}openSubmenu(){const e=this.subMenu&&this.subMenu.scrollHeight;this.subMenu.style.height=`${e}px`,setTimeout((()=>{this.subMenu&&(this.subMenu.style.height="auto")}),this.transitionDuration)}closeSubmenu(){const e=this.subMenu&&this.subMenu.scrollHeight;this.subMenu.style.height=`${e}px`,setTimeout((()=>{this.subMenu.style.height="0px"}))}getSiblings(){let e=[];if(!this.parentNode)return e;let t=this.parentNode.firstChild;for(;t;)1===t.nodeType&&t!==this&&e.push(t),t=t.nextSibling;return e}reset(){this.getSiblings().forEach((e=>{e.classList.contains(this.classes.active)&&(e.classList.remove(this.classes.active),e.isActive=!1,"mobile"===this.menuLayout&&e.closeSubmenu())}))}}customElements.define("foxkit-menu-dropdown",FoxKitMenuItem);class FoxKitMenus{constructor(){this.manualRenderMenus=window.FoxKitPlugins.Menus.map((e=>({id:e.id,...e.data}))).filter((e=>e.settings&&"selector"===e.settings.placement))||[],this.manualRenderMenus.length&&this.manualRenderMenus.forEach((e=>this.renderMenu(e)))}renderMenu(e){const t=e.settings.cssSelector?document.querySelector(e.settings.cssSelector):null,s=e.settings.cssSelectorMobile?document.querySelector(e.settings.cssSelectorMobile):null;if(t){const s=document.createElement("foxkit-menu");s.dataset.id=e.id,t.replaceWith(s)}if(s){const t=document.createElement("foxkit-menu");t.dataset.id=e.id,t.dataset.layout="mobile",t.classList.add("f-menu-mobile"),s.replaceWith(t)}}}window.FoxKitModules.Menus=new FoxKitMenus;